import{F as S,G as zt,I as Vt,K as bn,U as Wt,T as Kt,L as Se,M as ct,N as wn,B as Q,O as Ce,P as L,Q as ut,R as Ae,S as Jt,V as Yt,W as Qt,X as _n,Y as Xt,Z as We,$ as Zt,a0 as ve,a1 as Pe,a2 as es,a3 as ts,a4 as ss,a5 as At,a6 as ns,a7 as xn,a8 as En,a9 as ge,aa as vn,ab as as,ac as rs,ad as Pn,ae as se,_ as Tn,af as tt,ag as ne,ah as Te,ai as os,aj as is,ak as Re,al as dt,am as st,an as cs,e as lt,ao as H,ap as nt,aq as us,ar as ds,as as U,at as G,au as te,av as ls,aw as fs,ax as In,ay as Sn,az as hs,aA as Cn,aB as ms,aC as j,aD as O,aE as ae,a as gs,aF as D,aG as ps,aH as re,aI as at,aJ as $,b as E,aK as ft,aL as v,aM as oe,h as ys,j as bs,i as ke,aN as ws,aO as _s,aP as R,aQ as xs,aR as ie,aS as Be,aT as Me,aU as Es,aV as An,aW as Rn,aX as kn,aY as Bn,aZ as X,a_ as I,a$ as ht,b0 as mt,b1 as K,b2 as rt,b3 as vs,b4 as Ps,b5 as Ts,b6 as Is,b7 as Ss,b8 as Cs,b9 as As,ba as Mn,bb as Rs,bc as ks,bd as Bs,be as Ms,f as Ls,bf as qs,bg as Ln,bh as qn,bi as Nn,bj as On,bk as Fn,bl as jn,bm as gt,bn as Ns,bo as Os,bp as Fs,bq as Dn,br as Le,bs as js,bt as Hn,bu as Ds,bv as Hs,bw as Us,bx as ot,by as pt,bz as Gs,bA as Un,bB as Gn,bC as $n,bD as zn,bE as Vn,bF as Wn,bG as Kn,bH as Jn,bI as Yn,bJ as Qn,bK as Xn,bL as Zn,bM as ea,bN as ta,bO as sa,bP as na,bQ as aa,bR as ra,bS as oa,bT as ia,bU as ca,bV as ua,bW as da,bX as la,bY as fa,bZ as ha,b_ as ma,b$ as ga,c0 as pa,c1 as ya,c2 as ba,H as wa,c3 as _a,c4 as xa,c5 as Ea,c6 as va,c7 as Pa,c8 as Ta,c9 as Ia,ca as Sa,cb as Ca,cc as Aa,cd as Ra,ce as ka,cf as Ba,cg as Ma,ch as La,ci as qa,cj as Na,ck as Oa,cl as Fa,cm as ja,cn as Da,co as Ha,cp as Ua,cq as Ga,cr as $a,cs as za,ct as Va,cu as Wa,cv as Ka,cw as Ja,cx as Ya,cy as Qa,cz as Xa,cA as Za,cB as er,cC as tr,cD as sr,cE as nr,cF as ar,cG as rr,cH as or,cI as ir,cJ as cr,cK as ur,cL as dr,cM as lr,cN as fr,cO as hr,cP as mr,cQ as gr,cR as pr,cS as yr,cT as br,cU as wr,cV as _r,cW as xr,cX as Er,cY as vr,cZ as Pr,c_ as Tr,c$ as Ir,d0 as Sr,d1 as Cr,d2 as Ar,d as Rr,d3 as kr,d4 as Br,d5 as Mr,d6 as Lr,d7 as qr,d8 as Nr,d9 as Or,da as Fr,db as jr,dc as Dr,dd as Hr,de as Ur,df as Gr,dg as $r,dh as zr,di as Vr,dj as Wr,dk as Kr,dl as Jr,dm as Yr,dn as Qr,dp as Xr,dq as Zr,dr as eo,ds as to,dt as so,du as Rt,dv as pe,dw as no,dx as ao,dy as ro,dz as oo,dA as io,dB as co,dC as uo,dD as lo,dE as fo,dF as ho,dG as mo,dH as go,dI as po,dJ as yo,dK as bo,dL as wo,dM as _o,dN as xo,dO as Eo,dP as vo,dQ as Po,dR as To,dS as Io,dT as So,dU as Co,dV as Ao,dW as Ro,dX as ko,dY as Bo,dZ as Mo,d_ as Lo,d$ as qo,e0 as No,e1 as Oo,e2 as Fo,e3 as jo,e4 as Do,e5 as Ho,e6 as Uo,e7 as Go,e8 as $o,e9 as zo,ea as Vo,eb as Wo,ec as Ko,ed as Jo,ee as Yo,ef as Qo,eg as Xo,eh as Zo,ei,ej as ti,ek as si,el as ni,em as ai,en as ri,eo as oi,ep as ii,eq as ci,er as ui,es as di,et as li,eu as fi,ev as hi,ew as mi,ex as gi,ey as pi,ez as yi,eA as bi,eB as wi,eC as _i,eD as xi,eE as Ei,eF as vi,eG as Pi,eH as Ti,eI as Ii,eJ as Si,eK as Ci,eL as Ai,eM as Ri,eN as ki,eO as Bi,eP as Mi,eQ as Li,eR as qi,eS as Ni,eT as Oi,eU as Fi,eV as ji,eW as Di,eX as Hi,eY as Ui,eZ as Gi,e_ as $i,e$ as zi,f0 as Vi,f1 as Wi,f2 as Ki,f3 as Ji,f4 as Yi,f5 as Qi,f6 as Xi,f7 as Zi,f8 as ec,f9 as tc,fa as sc,fb as nc,fc as ac,fd as rc,fe as oc,ff as ic,fg as cc,fh as uc,fi as dc,fj as kt,fk as lc,fl as fc,fm as hc,fn as mc,s as gc,fo as pc,fp as Bt,fq as yc,fr as bc,fs as wc,ft as _c,fu as xc,fv as Ec,fw as vc,fx as Pc,m as C,k as Tc,l as Ic,n as Sc}from"./index-BAOXlGCN.js";import{d as Cc}from"./index-BCL_1kND.js";import{ccipRequest as Mt,offchainLookup as Ac,offchainLookupAbiItem as Rc,offchainLookupSignature as kc}from"./ccip-C1sUa0ab.js";function Bc(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const r=Object.getOwnPropertyDescriptor(s,a);r&&Object.defineProperty(e,a,r.get?r:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}async function Mc(e,{chain:t}){const{id:n,name:s,nativeCurrency:a,rpcUrls:r,blockExplorers:o}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:S(n),chainName:s,nativeCurrency:a,rpcUrls:r.default.http,blockExplorerUrls:o?Object.values(o).map(({url:c})=>c):void 0}]},{dedupe:!0,retryCount:0})}function yt({chain:e,currentChainId:t}){if(!e)throw new zt;if(t!==e.id)throw new Vt({chain:e,currentChainId:t})}function Lc(e,{docsPath:t,...n}){const s=(()=>{const a=bn(e,n);return a instanceof Wt?e:a})();return new Kt(s,{docsPath:t,...n})}const Ke=new Yt(128);async function bt(e,t){var w,x,_,P;const{account:n=e.account,chain:s=e.chain,accessList:a,authorizationList:r,blobs:o,data:c,gas:i,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:f,maxPriorityFeePerGas:m,nonce:d,value:h,...g}=t;if(typeof n>"u")throw new Se({docsPath:"/docs/actions/wallet/sendTransaction"});const p=n?Ce(n):null;try{ct(t);const b=await(async()=>{if(t.to)return t.to;if(r&&r.length>0)return await wn({authorization:r[0]}).catch(()=>{throw new Q("`to` is required. Could not infer from `authorizationList`.")})})();if((p==null?void 0:p.type)==="json-rpc"||p===null){let y;s!==null&&(y=await L(e,ut,"getChainId")({}),yt({currentChainId:y,chain:s}));const T=(_=(x=(w=e.chain)==null?void 0:w.formatters)==null?void 0:x.transactionRequest)==null?void 0:_.format,k=(T||Ae)({...Jt(g,{format:T}),accessList:a,authorizationList:r,blobs:o,chainId:y,data:c,from:p==null?void 0:p.address,gas:i,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:f,maxPriorityFeePerGas:m,nonce:d,to:b,value:h}),ee=Ke.get(e.uid),yn=ee?"wallet_sendTransaction":"eth_sendTransaction";try{return await e.request({method:yn,params:[k]},{retryCount:0})}catch(Ct){if(ee===!1)throw Ct;const V=Ct;if(V.name==="InvalidInputRpcError"||V.name==="InvalidParamsRpcError"||V.name==="MethodNotFoundRpcError"||V.name==="MethodNotSupportedRpcError")return await e.request({method:"wallet_sendTransaction",params:[k]},{retryCount:0}).then(ze=>(Ke.set(e.uid,!0),ze)).catch(ze=>{const Ve=ze;throw Ve.name==="MethodNotFoundRpcError"||Ve.name==="MethodNotSupportedRpcError"?(Ke.set(e.uid,!1),V):Ve});throw V}}if((p==null?void 0:p.type)==="local"){const y=await L(e,Qt,"prepareTransactionRequest")({account:p,accessList:a,authorizationList:r,blobs:o,chain:s,data:c,gas:i,gasPrice:u,maxFeePerBlobGas:l,maxFeePerGas:f,maxPriorityFeePerGas:m,nonce:d,nonceManager:p.nonceManager,parameters:[..._n,"sidecars"],value:h,...g,to:b}),T=(P=s==null?void 0:s.serializers)==null?void 0:P.transaction,A=await p.signTransaction(y,{serializer:T});return await L(e,Xt,"sendRawTransaction")({serializedTransaction:A})}throw(p==null?void 0:p.type)==="smart"?new We({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new We({docsPath:"/docs/actions/wallet/sendTransaction",type:p==null?void 0:p.type})}catch(b){throw b instanceof We?b:Lc(b,{...t,account:p,chain:t.chain||void 0})}}function qc(e,t){const{abi:n,args:s,bytecode:a,...r}=t,o=Zt({abi:n,args:s,bytecode:a});return bt(e,{...r,data:o})}function Nc(e){let t;if(typeof e=="string")t=ve(e,{modifiers:Pe});else{const n=es(e),s=e.length;for(let a=0;a<s;a++){const r=e[a];if(!ts(r)){t=ve(r,{modifiers:Pe,structs:n});break}}}if(!t)throw new ss({param:e});return t}function Oc(e){const t=[];if(typeof e=="string"){const n=At(e),s=n.length;for(let a=0;a<s;a++)t.push(ve(n[a],{modifiers:Pe}))}else{const n=es(e),s=e.length;for(let a=0;a<s;a++){const r=e[a];if(ts(r))continue;const o=At(r),c=o.length;for(let i=0;i<c;i++)t.push(ve(o[i],{modifiers:Pe,structs:n}))}}if(t.length===0)throw new ns({params:e});return t}async function Fc(e){return e.request({method:`${e.mode}_dumpState`})}async function jc(e,{address:t}){await e.request({method:`${e.mode}_impersonateAccount`,params:[t]})}async function Dc(e,{seconds:t}){return await e.request({method:"evm_increaseTime",params:[S(t)]})}async function Hc(e,{state:t}){await e.request({method:`${e.mode}_loadState`,params:[t]})}async function Uc(e,{blocks:t,interval:n}){e.mode==="ganache"?await e.request({method:"evm_mine",params:[{blocks:S(t)}]}):await e.request({method:`${e.mode}_mine`,params:[S(t),S(n||0)]})}const Gc=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),$s=new Uint8Array(new Array(16).fill(0).map((e,t)=>t)),$c=$s.map(e=>(9*e+5)%16);let wt=[$s],_t=[$c];for(let e=0;e<4;e++)for(let t of[wt,_t])t.push(t[e].map(n=>Gc[n]));const zs=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),zc=wt.map((e,t)=>e.map(n=>zs[t][n])),Vc=_t.map((e,t)=>e.map(n=>zs[t][n])),Wc=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),Kc=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function Lt(e,t,n,s){return e===0?t^n^s:e===1?t&n|~t&s:e===2?(t|~n)^s:e===3?t&s|n&~s:t^(n|~s)}const ye=new Uint32Array(16);class Jc extends En{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:t,h1:n,h2:s,h3:a,h4:r}=this;return[t,n,s,a,r]}set(t,n,s,a,r){this.h0=t|0,this.h1=n|0,this.h2=s|0,this.h3=a|0,this.h4=r|0}process(t,n){for(let d=0;d<16;d++,n+=4)ye[d]=t.getUint32(n,!0);let s=this.h0|0,a=s,r=this.h1|0,o=r,c=this.h2|0,i=c,u=this.h3|0,l=u,f=this.h4|0,m=f;for(let d=0;d<5;d++){const h=4-d,g=Wc[d],p=Kc[d],w=wt[d],x=_t[d],_=zc[d],P=Vc[d];for(let b=0;b<16;b++){const y=ge(s+Lt(d,r,c,u)+ye[w[b]]+g,_[b])+f|0;s=f,f=u,u=ge(c,10)|0,c=r,r=y}for(let b=0;b<16;b++){const y=ge(a+Lt(h,o,i,l)+ye[x[b]]+p,P[b])+m|0;a=m,m=l,l=ge(i,10)|0,i=o,o=y}}this.set(this.h1+c+l|0,this.h2+u+m|0,this.h3+f+a|0,this.h4+s+o|0,this.h0+r+i|0)}roundClean(){ye.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}const Yc=xn(()=>new Jc);function Qc({chains:e,id:t}){return e.find(n=>n.id===t)}const Je=new Map;async function Xc(e){const{getSocket:t,keepAlive:n=!0,key:s="socket",reconnect:a=!0,url:r}=e,{interval:o=3e4}=typeof n=="object"?n:{},{attempts:c=5,delay:i=2e3}=typeof a=="object"?a:{};let u=Je.get(`${s}:${r}`);if(u)return u;let l=0;const{schedule:f}=vn({id:`${s}:${r}`,fn:async()=>{const h=new Map,g=new Map;let p,w,x;async function _(){const P=await t({onClose(){var b,y;for(const T of h.values())(b=T.onError)==null||b.call(T,new se({url:r}));for(const T of g.values())(y=T.onError)==null||y.call(T,new se({url:r}));h.clear(),g.clear(),a&&l<c&&setTimeout(async()=>{l++,await _().catch(console.error)},i)},onError(b){var y,T;p=b;for(const A of h.values())(y=A.onError)==null||y.call(A,p);for(const A of g.values())(T=A.onError)==null||T.call(A,p);h.clear(),g.clear(),u==null||u.close(),a&&l<c&&setTimeout(async()=>{l++,await _().catch(console.error)},i)},onOpen(){p=void 0,l=0},onResponse(b){const y=b.method==="eth_subscription",T=y?b.params.subscription:b.id,A=y?g:h,k=A.get(T);k&&k.onResponse(b),y||A.delete(T)}});return w=P,n&&(x&&clearInterval(x),x=setInterval(()=>{var b;return(b=w.ping)==null?void 0:b.call(w)},o)),P}return await _(),p=void 0,u={close(){x&&clearInterval(x),w.close(),Je.delete(`${s}:${r}`)},get socket(){return w},request({body:P,onError:b,onResponse:y}){p&&b&&b(p);const T=P.id??Pn.take(),A=k=>{var ee;typeof k.id=="number"&&T!==k.id||(P.method==="eth_subscribe"&&typeof k.result=="string"&&g.set(k.result,{onResponse:A,onError:b}),P.method==="eth_unsubscribe"&&g.delete((ee=P.params)==null?void 0:ee[0]),y(k))};h.set(T,{onResponse:A,onError:b});try{w.request({body:{jsonrpc:"2.0",id:T,...P}})}catch(k){b==null||b(k)}},requestAsync({body:P,timeout:b=1e4}){return as(()=>new Promise((y,T)=>this.request({body:P,onError:T,onResponse:y})),{errorInstance:new rs({body:P,url:r}),timeout:b})},requests:h,subscriptions:g,url:r},Je.set(`${s}:${r}`,u),[u]}}),[m,[d]]=await f();return d}async function Ee(e,t={}){const{keepAlive:n,reconnect:s}=t;return Xc({async getSocket({onClose:a,onError:r,onOpen:o,onResponse:c}){const i=await Tn(()=>import("./native-B8WyFf_Z.js"),[]).then(d=>d.WebSocket),u=new i(e);function l(){u.removeEventListener("close",l),u.removeEventListener("message",f),u.removeEventListener("error",r),u.removeEventListener("open",o),a()}function f({data:d}){c(JSON.parse(d))}u.addEventListener("close",l),u.addEventListener("message",f),u.addEventListener("error",r),u.addEventListener("open",o),u.readyState===i.CONNECTING&&await new Promise((d,h)=>{u&&(u.onopen=d,u.onerror=h)});const{close:m}=u;return Object.assign(u,{close(){m.bind(u)(),l()},ping(){try{if(u.readyState===u.CLOSED||u.readyState===u.CLOSING)throw new tt({url:u.url,cause:new se({url:u.url})});const d={jsonrpc:"2.0",method:"net_version",params:[]};u.send(JSON.stringify(d))}catch(d){r(d)}},request({body:d}){if(u.readyState===u.CLOSED||u.readyState===u.CLOSING)throw new tt({body:d,url:u.url,cause:new se({url:u.url})});return u.send(JSON.stringify(d))}})},keepAlive:n,reconnect:s,url:e})}async function Zc(e){const t=await Ee(e);return Object.assign(t.socket,{requests:t.requests,subscriptions:t.subscriptions})}function eu(e){const{abi:t,data:n}=e,s=ne(n,0,4),a=t.find(r=>r.type==="function"&&s===Te(os(r)));if(!a)throw new is(s,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:a.name,args:"inputs"in a&&a.inputs&&a.inputs.length>0?Re(a.inputs,ne(n,4)):void 0}}const Ye="/docs/contract/encodeErrorResult";function tu(e){const{abi:t,errorName:n,args:s}=e;let a=t[0];if(n){const i=dt({abi:t,args:s,name:n});if(!i)throw new st(n,{docsPath:Ye});a=i}if(a.type!=="error")throw new st(void 0,{docsPath:Ye});const r=os(a),o=Te(r);let c="0x";if(s&&s.length>0){if(!a.inputs)throw new cs(a.name,{docsPath:Ye});c=lt(a.inputs,s)}return H([o,c])}const Qe="/docs/contract/encodeFunctionResult";function su(e){const{abi:t,functionName:n,result:s}=e;let a=t[0];if(n){const o=dt({abi:t,name:n});if(!o)throw new nt(n,{docsPath:Qe});a=o}if(a.type!=="function")throw new nt(void 0,{docsPath:Qe});if(!a.outputs)throw new us(a.name,{docsPath:Qe});let r=Array.isArray(s)?s:[s];return a.outputs.length===0&&!r[0]&&(r=[]),lt(a.outputs,r)}function nu(e,t){if(e.length!==t.length)throw new ds({expectedLength:e.length,givenLength:t.length});const n=[];for(let s=0;s<e.length;s++){const a=e[s],r=t[s];n.push(Vs(a,r))}return H(n)}function Vs(e,t,n=!1){if(e==="address"){const o=t;if(!U(o))throw new G({address:o});return te(o.toLowerCase(),{size:n?32:null})}if(e==="string")return ls(t);if(e==="bytes")return t;if(e==="bool")return te(fs(t),{size:n?32:1});const s=e.match(In);if(s){const[o,c,i="256"]=s,u=Number.parseInt(i)/8;return S(t,{size:n?32:u,signed:c==="int"})}const a=e.match(Sn);if(a){const[o,c]=a;if(Number.parseInt(c)!==(t.length-2)/2)throw new hs({expectedSize:Number.parseInt(c),givenSize:(t.length-2)/2});return te(t,{dir:"right",size:n?32:null})}const r=e.match(Cn);if(r&&Array.isArray(t)){const[o,c]=r,i=[];for(let u=0;u<t.length;u++)i.push(Vs(c,t[u],!0));return i.length===0?"0x":H(i)}throw new ms(e)}function it(e){return!e||typeof e!="object"||!("BYTES_PER_ELEMENT"in e)?!1:e.BYTES_PER_ELEMENT===1&&e.constructor.name==="Uint8Array"}function au(e){return e.opcode==="CREATE2"?Ks(e):Ws(e)}function Ws(e){const t=j(O(e.from));let n=j(e.nonce);return n[0]===0&&(n=new Uint8Array([])),O(`0x${ae(D([t,n],"bytes")).slice(26)}`)}function Ks(e){const t=j(O(e.from)),n=te(it(e.salt)?e.salt:j(e.salt),{size:32}),s="bytecodeHash"in e?it(e.bytecodeHash)?e.bytecodeHash:j(e.bytecodeHash):ae(e.bytecode,"bytes");return O(ne(ae(gs([j("0xff"),t,n,s])),12))}function xt(e,t="hex"){const n=(()=>{if(typeof e=="string"){if(e.length>3&&e.length%2!==0)throw new ps(e);return re(e)}return e})(),s=at(n,{recursiveReadLimit:Number.POSITIVE_INFINITY});return Js(s,t)}function Js(e,t="hex"){if(e.bytes.length===0)return t==="hex"?$(e.bytes):e.bytes;const n=e.readByte();if(n<128&&e.decrementPosition(1),n<192){const a=qt(e,n,128),r=e.readBytes(a);return t==="hex"?$(r):r}const s=qt(e,n,192);return ru(e,s,t)}function qt(e,t,n){if(n===128&&t<128)return 1;if(t<=n+55)return t-n;if(t===n+55+1)return e.readUint8();if(t===n+55+2)return e.readUint16();if(t===n+55+3)return e.readUint24();if(t===n+55+4)return e.readUint32();throw new Q("Invalid RLP prefix")}function ru(e,t,n){const s=e.position,a=[];for(;e.position-s<t;)a.push(Js(e,n));return a}function Ys(e){return E(e)&&ft(e)===32}function ou(e,t){const n=t||"hex",s=Yc(E(e,{strict:!1})?j(e):e);return n==="bytes"?s:v(s)}async function Qs({message:e,signature:t}){return oe({hash:ys(e),signature:t})}async function Xs(e){const{domain:t,message:n,primaryType:s,signature:a,types:r}=e;return oe({hash:bs({domain:t,message:n,primaryType:s,types:r}),signature:a})}async function iu({address:e,hash:t,signature:n}){return ke(O(e),await oe({hash:t,signature:n}))}async function cu({address:e,message:t,signature:n}){return ke(O(e),await Qs({message:t,signature:n}))}async function uu(e){const{address:t,domain:n,message:s,primaryType:a,signature:r,types:o}=e;return ke(O(t),await Xs({domain:n,message:s,primaryType:a,signature:r,types:o}))}function du(e){if(!ws(e))return{signature:e};const[t,n,s]=Re([{type:"address"},{type:"bytes"},{type:"bytes"}],e);return{address:t,data:n,signature:s}}function Zs(e){const t=_s(e,0,1);if(t==="0x04")return"eip7702";if(t==="0x03")return"eip4844";if(t==="0x02")return"eip1559";if(t==="0x01")return"eip2930";if(t!=="0x"&&R(t)>=192)return"legacy";throw new xs({serializedType:t})}function en(e){const{authorizationList:t}=e;if(t)for(const n of t){const{contractAddress:s,chainId:a}=n;if(!U(s))throw new G({address:s});if(a<0)throw new ie({chainId:a})}ce(e)}function tn(e){const{blobVersionedHashes:t}=e;if(t){if(t.length===0)throw new An;for(const n of t){const s=ft(n),a=R(ne(n,0,1));if(s!==32)throw new Rn({hash:n,size:s});if(a!==kn)throw new Bn({hash:n,version:a})}}ce(e)}function ce(e){const{chainId:t,maxPriorityFeePerGas:n,maxFeePerGas:s,to:a}=e;if(t<=0)throw new ie({chainId:t});if(a&&!U(a))throw new G({address:a});if(s&&s>Be)throw new Me({maxFeePerGas:s});if(n&&s&&n>s)throw new Es({maxFeePerGas:s,maxPriorityFeePerGas:n})}function Et(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:s,maxFeePerGas:a,to:r}=e;if(t<=0)throw new ie({chainId:t});if(r&&!U(r))throw new G({address:r});if(n||a)throw new Q("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(s&&s>Be)throw new Me({maxFeePerGas:s})}function vt(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:s,maxFeePerGas:a,to:r}=e;if(r&&!U(r))throw new G({address:r});if(typeof t<"u"&&t<=0)throw new ie({chainId:t});if(n||a)throw new Q("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(s&&s>Be)throw new Me({maxFeePerGas:s})}function sn(e){const t=Zs(e);return t==="eip1559"?hu(e):t==="eip2930"?mu(e):t==="eip4844"?fu(e):t==="eip7702"?lu(e):gu(e)}function lu(e){const t=qe(e),[n,s,a,r,o,c,i,u,l,f,m,d,h]=t;if(t.length!==10&&t.length!==13)throw new X({attributes:{chainId:n,nonce:s,maxPriorityFeePerGas:a,maxFeePerGas:r,gas:o,to:c,value:i,data:u,accessList:l,authorizationList:f,...t.length>9?{v:m,r:d,s:h}:{}},serializedTransaction:e,type:"eip7702"});const g={chainId:R(n),type:"eip7702"};return E(c)&&c!=="0x"&&(g.to=c),E(o)&&o!=="0x"&&(g.gas=I(o)),E(u)&&u!=="0x"&&(g.data=u),E(s)&&s!=="0x"&&(g.nonce=R(s)),E(i)&&i!=="0x"&&(g.value=I(i)),E(r)&&r!=="0x"&&(g.maxFeePerGas=I(r)),E(a)&&a!=="0x"&&(g.maxPriorityFeePerGas=I(a)),l.length!==0&&l!=="0x"&&(g.accessList=Ne(l)),f.length!==0&&f!=="0x"&&(g.authorizationList=pu(f)),en(g),{...t.length===13?ue(t):void 0,...g}}function fu(e){const t=qe(e),n=t.length===4,s=n?t[0]:t,a=n?t.slice(1):[],[r,o,c,i,u,l,f,m,d,h,g,p,w,x]=s,[_,P,b]=a;if(!(s.length===11||s.length===14))throw new X({attributes:{chainId:r,nonce:o,maxPriorityFeePerGas:c,maxFeePerGas:i,gas:u,to:l,value:f,data:m,accessList:d,...s.length>9?{v:p,r:w,s:x}:{}},serializedTransaction:e,type:"eip4844"});const y={blobVersionedHashes:g,chainId:R(r),type:"eip4844"};return E(l)&&l!=="0x"&&(y.to=l),E(u)&&u!=="0x"&&(y.gas=I(u)),E(m)&&m!=="0x"&&(y.data=m),E(o)&&o!=="0x"&&(y.nonce=R(o)),E(f)&&f!=="0x"&&(y.value=I(f)),E(h)&&h!=="0x"&&(y.maxFeePerBlobGas=I(h)),E(i)&&i!=="0x"&&(y.maxFeePerGas=I(i)),E(c)&&c!=="0x"&&(y.maxPriorityFeePerGas=I(c)),d.length!==0&&d!=="0x"&&(y.accessList=Ne(d)),_&&P&&b&&(y.sidecars=ht({blobs:_,commitments:P,proofs:b})),tn(y),{...s.length===14?ue(s):void 0,...y}}function hu(e){const t=qe(e),[n,s,a,r,o,c,i,u,l,f,m,d]=t;if(!(t.length===9||t.length===12))throw new X({attributes:{chainId:n,nonce:s,maxPriorityFeePerGas:a,maxFeePerGas:r,gas:o,to:c,value:i,data:u,accessList:l,...t.length>9?{v:f,r:m,s:d}:{}},serializedTransaction:e,type:"eip1559"});const h={chainId:R(n),type:"eip1559"};return E(c)&&c!=="0x"&&(h.to=c),E(o)&&o!=="0x"&&(h.gas=I(o)),E(u)&&u!=="0x"&&(h.data=u),E(s)&&s!=="0x"&&(h.nonce=R(s)),E(i)&&i!=="0x"&&(h.value=I(i)),E(r)&&r!=="0x"&&(h.maxFeePerGas=I(r)),E(a)&&a!=="0x"&&(h.maxPriorityFeePerGas=I(a)),l.length!==0&&l!=="0x"&&(h.accessList=Ne(l)),ce(h),{...t.length===12?ue(t):void 0,...h}}function mu(e){const t=qe(e),[n,s,a,r,o,c,i,u,l,f,m]=t;if(!(t.length===8||t.length===11))throw new X({attributes:{chainId:n,nonce:s,gasPrice:a,gas:r,to:o,value:c,data:i,accessList:u,...t.length>8?{v:l,r:f,s:m}:{}},serializedTransaction:e,type:"eip2930"});const d={chainId:R(n),type:"eip2930"};return E(o)&&o!=="0x"&&(d.to=o),E(r)&&r!=="0x"&&(d.gas=I(r)),E(i)&&i!=="0x"&&(d.data=i),E(s)&&s!=="0x"&&(d.nonce=R(s)),E(c)&&c!=="0x"&&(d.value=I(c)),E(a)&&a!=="0x"&&(d.gasPrice=I(a)),u.length!==0&&u!=="0x"&&(d.accessList=Ne(u)),Et(d),{...t.length===11?ue(t):void 0,...d}}function gu(e){const t=xt(e,"hex"),[n,s,a,r,o,c,i,u,l]=t;if(!(t.length===6||t.length===9))throw new X({attributes:{nonce:n,gasPrice:s,gas:a,to:r,value:o,data:c,...t.length>6?{v:i,r:u,s:l}:{}},serializedTransaction:e,type:"legacy"});const f={type:"legacy"};if(E(r)&&r!=="0x"&&(f.to=r),E(a)&&a!=="0x"&&(f.gas=I(a)),E(c)&&c!=="0x"&&(f.data=c),E(n)&&n!=="0x"&&(f.nonce=R(n)),E(o)&&o!=="0x"&&(f.value=I(o)),E(s)&&s!=="0x"&&(f.gasPrice=I(s)),vt(f),t.length===6)return f;const m=E(i)&&i!=="0x"?I(i):0n;if(l==="0x"&&u==="0x")return m>0&&(f.chainId=Number(m)),f;const d=m,h=Number((d-35n)/2n);if(h>0)f.chainId=h;else if(d!==27n&&d!==28n)throw new mt({v:d});return f.v=d,f.s=l,f.r=u,f.yParity=d%2n===0n?1:0,f}function qe(e){return xt(`0x${e.slice(4)}`,"hex")}function Ne(e){const t=[];for(let n=0;n<e.length;n++){const[s,a]=e[n];if(!U(s,{strict:!1}))throw new G({address:s});t.push({address:s,storageKeys:a.map(r=>Ys(r)?r:K(r))})}return t}function pu(e){const t=[];for(let n=0;n<e.length;n++){const[s,a,r,o,c,i]=e[n];t.push({chainId:R(s),contractAddress:a,nonce:R(r),...ue([o,c,i])})}return t}function ue(e){const t=e.slice(-3),n=t[0]==="0x"||I(t[0])===0n?27n:28n;return{r:rt(t[1],{size:32}),s:rt(t[2],{size:32}),v:n,yParity:n===27n?0:1}}function yu(e){if(!e||e.length===0)return[];const t=[];for(const n of e){const{contractAddress:s,chainId:a,nonce:r,...o}=n;t.push([a?v(a):"0x",s,r?v(r):"0x",...le({},o)])}return t}function de(e){if(!e||e.length===0)return[];const t=[];for(let n=0;n<e.length;n++){const{address:s,storageKeys:a}=e[n];for(let r=0;r<a.length;r++)if(a[r].length-2!==64)throw new vs({storageKey:a[r]});if(!U(s,{strict:!1}))throw new G({address:s});t.push([s,a])}return t}function nn(e,t){const n=Ps(e);return n==="eip1559"?_u(e,t):n==="eip2930"?xu(e,t):n==="eip4844"?wu(e,t):n==="eip7702"?bu(e,t):Eu(e,t)}function bu(e,t){const{authorizationList:n,chainId:s,gas:a,nonce:r,to:o,value:c,maxFeePerGas:i,maxPriorityFeePerGas:u,accessList:l,data:f}=e;en(e);const m=de(l),d=yu(n);return H(["0x04",D([v(s),r?v(r):"0x",u?v(u):"0x",i?v(i):"0x",a?v(a):"0x",o??"0x",c?v(c):"0x",f??"0x",m,d,...le(e,t)])])}function wu(e,t){const{chainId:n,gas:s,nonce:a,to:r,value:o,maxFeePerBlobGas:c,maxFeePerGas:i,maxPriorityFeePerGas:u,accessList:l,data:f}=e;tn(e);let m=e.blobVersionedHashes,d=e.sidecars;if(e.blobs&&(typeof m>"u"||typeof d>"u")){const _=typeof e.blobs[0]=="string"?e.blobs:e.blobs.map(y=>$(y)),P=e.kzg,b=Ts({blobs:_,kzg:P});if(typeof m>"u"&&(m=Is({commitments:b})),typeof d>"u"){const y=Ss({blobs:_,commitments:b,kzg:P});d=ht({blobs:_,commitments:b,proofs:y})}}const h=de(l),g=[v(n),a?v(a):"0x",u?v(u):"0x",i?v(i):"0x",s?v(s):"0x",r??"0x",o?v(o):"0x",f??"0x",h,c?v(c):"0x",m??[],...le(e,t)],p=[],w=[],x=[];if(d)for(let _=0;_<d.length;_++){const{blob:P,commitment:b,proof:y}=d[_];p.push(P),w.push(b),x.push(y)}return H(["0x03",d?D([g,p,w,x]):D(g)])}function _u(e,t){const{chainId:n,gas:s,nonce:a,to:r,value:o,maxFeePerGas:c,maxPriorityFeePerGas:i,accessList:u,data:l}=e;ce(e);const f=de(u),m=[v(n),a?v(a):"0x",i?v(i):"0x",c?v(c):"0x",s?v(s):"0x",r??"0x",o?v(o):"0x",l??"0x",f,...le(e,t)];return H(["0x02",D(m)])}function xu(e,t){const{chainId:n,gas:s,data:a,nonce:r,to:o,value:c,accessList:i,gasPrice:u}=e;Et(e);const l=de(i),f=[v(n),r?v(r):"0x",u?v(u):"0x",s?v(s):"0x",o??"0x",c?v(c):"0x",a??"0x",l,...le(e,t)];return H(["0x01",D(f)])}function Eu(e,t){const{chainId:n=0,gas:s,data:a,nonce:r,to:o,value:c,gasPrice:i}=e;vt(e);let u=[r?v(r):"0x",i?v(i):"0x",s?v(s):"0x",o??"0x",c?v(c):"0x",a??"0x"];if(t){const l=(()=>{if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(t.v===35n?0n:1n);if(n>0)return BigInt(n*2)+BigInt(35n+t.v-27n);const d=27n+(t.v===27n?0n:1n);if(t.v!==d)throw new mt({v:t.v});return d})(),f=K(t.r),m=K(t.s);u=[...u,v(l),f==="0x00"?"0x":f,m==="0x00"?"0x":m]}else n>0&&(u=[...u,v(n),"0x","0x"]);return D(u)}function le(e,t){const n=t??e,{v:s,yParity:a}=n;if(typeof n.r>"u")return[];if(typeof n.s>"u")return[];if(typeof s>"u"&&typeof a>"u")return[];const r=K(n.r),o=K(n.s);return[typeof a=="number"?a?v(1):"0x":s===0n?"0x":s===1n?v(1):s===27n?"0x":v(1),r==="0x00"?"0x":r,o==="0x00"?"0x":o]}class an extends Q{constructor({value:t}){super(`Number \`${t}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function Pt(e,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new an({value:e});let[n,s="0"]=e.split(".");const a=n.startsWith("-");if(a&&(n=n.slice(1)),s=s.replace(/(0+)$/,""),t===0)Math.round(+`.${s}`)===1&&(n=`${BigInt(n)+1n}`),s="";else if(s.length>t){const[r,o,c]=[s.slice(0,t-1),s.slice(t-1,t),s.slice(t)],i=Math.round(+`${o}.${c}`);i>9?s=`${BigInt(r)+BigInt(1)}0`.padStart(r.length+1,"0"):s=`${r}${i}`,s.length>t&&(s=s.slice(1),n=`${BigInt(n)+1n}`),s=s.slice(0,t)}else s=s.padEnd(t,"0");return BigInt(`${a?"-":""}${n}${s}`)}function vu(e,t="wei"){return Pt(e,Cs[t])}function Pu(e,t="wei"){return Pt(e,As[t])}function rn(e){const{source:t}=e,n=new Map,s=new Yt(8192),a=new Map,r=({address:o,chainId:c})=>`${o}.${c}`;return{async consume({address:o,chainId:c,client:i}){const u=r({address:o,chainId:c}),l=this.get({address:o,chainId:c,client:i});this.increment({address:o,chainId:c});const f=await l;return await t.set({address:o,chainId:c},f),s.set(u,f),f},async increment({address:o,chainId:c}){const i=r({address:o,chainId:c}),u=n.get(i)??0;n.set(i,u+1)},async get({address:o,chainId:c,client:i}){const u=r({address:o,chainId:c});let l=a.get(u);return l||(l=(async()=>{try{const m=await t.get({address:o,chainId:c,client:i}),d=s.get(u)??0;return d>0&&m<=d?d+1:(s.delete(u),m)}finally{this.reset({address:o,chainId:c})}})(),a.set(u,l)),(n.get(u)??0)+await l},reset({address:o,chainId:c}){const i=r({address:o,chainId:c});n.delete(i),a.delete(i)}}}function Tu(){return{async get(e){const{address:t,client:n}=e;return Mn(n,{address:t,blockTag:"pending"})},set(){}}}const Iu=rn({source:Tu()});async function Su(e){var n;return((n=e.account)==null?void 0:n.type)==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(s=>Rs(s))}async function Cu(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}async function Au(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>O(n))}async function Ru(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}async function ku(e,{hash:t}){await e.request({method:`${e.mode}_dropTransaction`,params:[t]})}async function Bu(e){return e.mode==="ganache"?await e.request({method:"eth_mining"}):await e.request({method:`${e.mode}_getAutomine`})}async function Mu(e){return await e.request({method:"txpool_content"})}async function Lu(e){const{pending:t,queued:n}=await e.request({method:"txpool_status"});return{pending:R(t),queued:R(n)}}async function qu(e){return await e.request({method:"txpool_inspect"})}async function Nu(e){await e.request({method:`${e.mode}_removeBlockTimestampInterval`})}async function Ou(e,{blockNumber:t,jsonRpcUrl:n}={}){await e.request({method:`${e.mode}_reset`,params:[{forking:{blockNumber:Number(t),jsonRpcUrl:n}}]})}async function Fu(e,{id:t}){await e.request({method:"evm_revert",params:[t]})}async function ju(e,t){var u,l,f,m;const{account:n=e.account,chain:s=e.chain,...a}=t;if(!n)throw new Se({docsPath:"/docs/actions/wallet/signTransaction"});const r=Ce(n);ct({account:r,...t});const o=await L(e,ut,"getChainId")({});s!==null&&yt({currentChainId:o,chain:s});const c=(s==null?void 0:s.formatters)||((u=e.chain)==null?void 0:u.formatters),i=((l=c==null?void 0:c.transactionRequest)==null?void 0:l.format)||Ae;return r.signTransaction?r.signTransaction({...a,chainId:o},{serializer:(m=(f=e.chain)==null?void 0:f.serializers)==null?void 0:m.transaction}):await e.request({method:"eth_signTransaction",params:[{...i(a),chainId:S(o),from:r.address}]},{retryCount:0})}async function Du(e,t){var w,x,_;const{accessList:n,data:s,from:a,gas:r,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:i,nonce:u,to:l,value:f,...m}=t,d=(_=(x=(w=e.chain)==null?void 0:w.formatters)==null?void 0:x.transactionRequest)==null?void 0:_.format,g=(d||Ae)({...Jt(m,{format:d}),accessList:n,data:s,from:a,gas:r,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:i,nonce:u,to:l,value:f});return await e.request({method:"eth_sendUnsignedTransaction",params:[g]})}async function Hu(e,{address:t,value:n}){e.mode==="ganache"?await e.request({method:"evm_setAccountBalance",params:[t,S(n)]}):await e.request({method:`${e.mode}_setBalance`,params:[t,S(n)]})}async function Uu(e,t){e.mode==="ganache"?t?await e.request({method:"miner_start"}):await e.request({method:"miner_stop"}):await e.request({method:"evm_setAutomine",params:[t]})}async function Gu(e,{gasLimit:t}){await e.request({method:"evm_setBlockGasLimit",params:[S(t)]})}async function $u(e,{interval:t}){const n=e.mode==="hardhat"?t*1e3:t;await e.request({method:`${e.mode}_setBlockTimestampInterval`,params:[n]})}async function zu(e,{address:t,bytecode:n}){e.mode==="ganache"?await e.request({method:"evm_setAccountCode",params:[t,n]}):await e.request({method:`${e.mode}_setCode`,params:[t,n]})}async function Vu(e,{address:t}){await e.request({method:`${e.mode}_setCoinbase`,params:[t]})}async function Wu(e,{interval:t}){const n=e.mode==="hardhat"?t*1e3:t;await e.request({method:"evm_setIntervalMining",params:[n]})}async function Ku(e,t){await e.request({method:`${e.mode}_setLoggingEnabled`,params:[t]})}async function Ju(e,{gasPrice:t}){await e.request({method:`${e.mode}_setMinGasPrice`,params:[S(t)]})}async function Yu(e,{baseFeePerGas:t}){await e.request({method:`${e.mode}_setNextBlockBaseFeePerGas`,params:[S(t)]})}async function Qu(e,{timestamp:t}){await e.request({method:"evm_setNextBlockTimestamp",params:[S(t)]})}async function Xu(e,{address:t,nonce:n}){await e.request({method:`${e.mode}_setNonce`,params:[t,S(n)]})}async function Zu(e,t){await e.request({method:`${e.mode}_setRpcUrl`,params:[t]})}async function ed(e,{address:t,index:n,value:s}){await e.request({method:`${e.mode}_setStorageAt`,params:[t,typeof n=="number"?S(n):n,s]})}async function td(e){return await e.request({method:"evm_snapshot"})}async function sd(e,t){const{account:n=e.account,domain:s,message:a,primaryType:r}=t;if(!n)throw new Se({docsPath:"/docs/actions/wallet/signTypedData"});const o=Ce(n),c={EIP712Domain:ks({domain:s}),...t.types};if(Bs({domain:s,message:a,primaryType:r,types:c}),o.signTypedData)return o.signTypedData({domain:s,message:a,primaryType:r,types:c});const i=Ms({domain:s,message:a,primaryType:r,types:c});return e.request({method:"eth_signTypedData_v4",params:[o.address,i]},{retryCount:0})}async function nd(e,{address:t}){await e.request({method:`${e.mode}_stopImpersonatingAccount`,params:[t]})}async function ad(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:S(t)}]},{retryCount:0})}async function rd(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}async function on(e,t){const{abi:n,account:s=e.account,address:a,args:r,dataSuffix:o,functionName:c,...i}=t;if(typeof s>"u")throw new Se({docsPath:"/docs/contract/writeContract"});const u=s?Ce(s):null,l=Ls({abi:n,args:r,functionName:c});try{return await L(e,bt,"sendTransaction")({data:`${l}${o?o.replace("0x",""):""}`,to:a,account:u,...i})}catch(f){throw qs(f,{abi:n,address:a,args:r,docsPath:"/docs/contract/writeContract",functionName:c,sender:u==null?void 0:u.address})}}function od({abi:e,address:t,client:n}){const s=n,[a,r]=s?"public"in s&&"wallet"in s?[s.public,s.wallet]:"public"in s?[s.public,void 0]:"wallet"in s?[void 0,s.wallet]:[s,s]:[void 0,void 0],o=a!=null,c=r!=null,i={};let u=!1,l=!1,f=!1;for(const m of e)if(m.type==="function"?m.stateMutability==="view"||m.stateMutability==="pure"?u=!0:l=!0:m.type==="event"&&(f=!0),u&&l&&f)break;return o&&(u&&(i.read=new Proxy({},{get(m,d){return(...h)=>{const{args:g,options:p}=be(h);return L(a,Ln,"readContract")({abi:e,address:t,functionName:d,args:g,...p})}}})),l&&(i.simulate=new Proxy({},{get(m,d){return(...h)=>{const{args:g,options:p}=be(h);return L(a,qn,"simulateContract")({abi:e,address:t,functionName:d,args:g,...p})}}})),f&&(i.createEventFilter=new Proxy({},{get(m,d){return(...h)=>{const g=e.find(x=>x.type==="event"&&x.name===d),{args:p,options:w}=Xe(h,g);return L(a,Nn,"createContractEventFilter")({abi:e,address:t,eventName:d,args:p,...w})}}}),i.getEvents=new Proxy({},{get(m,d){return(...h)=>{const g=e.find(x=>x.type==="event"&&x.name===d),{args:p,options:w}=Xe(h,g);return L(a,On,"getContractEvents")({abi:e,address:t,eventName:d,args:p,...w})}}}),i.watchEvent=new Proxy({},{get(m,d){return(...h)=>{const g=e.find(x=>x.type==="event"&&x.name===d),{args:p,options:w}=Xe(h,g);return L(a,Fn,"watchContractEvent")({abi:e,address:t,eventName:d,args:p,...w})}}}))),c&&l&&(i.write=new Proxy({},{get(m,d){return(...h)=>{const{args:g,options:p}=be(h);return L(r,on,"writeContract")({abi:e,address:t,functionName:d,args:g,...p})}}})),(o||c)&&l&&(i.estimateGas=new Proxy({},{get(m,d){return(...h)=>{const{args:g,options:p}=be(h);return L(a??r,jn,"estimateContractGas")({abi:e,address:t,functionName:d,args:g,...p,account:p.account??r.account})}}})),i.address=t,i.abi=e,i}function be(e){const t=e.length&&Array.isArray(e[0]),n=t?e[0]:[],s=(t?e[1]:e[0])??{};return{args:n,options:s}}function Xe(e,t){let n=!1;Array.isArray(e[0])?n=!0:e.length===1?n=t.inputs.some(r=>r.indexed):e.length===2&&(n=!0);const s=n?e[0]:void 0,a=(n?e[1]:e[0])??{};return{args:s,options:a}}function id(e,t={}){const{key:n="fallback",name:s="Fallback",rank:a=!1,retryCount:r,retryDelay:o}=t;return({chain:c,pollingInterval:i=4e3,timeout:u,...l})=>{let f=e,m=()=>{};const d=gt({key:n,name:s,async request({method:h,params:g}){const p=async(w=0)=>{const x=f[w]({...l,chain:c,retryCount:0,timeout:u});try{const _=await x.request({method:h,params:g});return m({method:h,params:g,response:_,transport:x,status:"success"}),_}catch(_){if(m({error:_,method:h,params:g,transport:x,status:"error"}),cd(_)||w===f.length-1)throw _;return p(w+1)}};return p()},retryCount:r,retryDelay:o,type:"fallback"},{onResponse:h=>m=h,transports:f.map(h=>h({chain:c,retryCount:0}))});if(a){const h=typeof a=="object"?a:{};ud({chain:c,interval:h.interval??i,onTransports:g=>f=g,ping:h.ping,sampleCount:h.sampleCount,timeout:h.timeout,transports:f,weights:h.weights})}return d}}function cd(e){return!!("code"in e&&typeof e.code=="number"&&(e.code===Ns.code||e.code===Os.code||Fs.nodeMessage.test(e.message)||e.code===5e3))}function ud({chain:e,interval:t=4e3,onTransports:n,ping:s,sampleCount:a=10,timeout:r=1e3,transports:o,weights:c={}}){const{stability:i=.7,latency:u=.3}=c,l=[],f=async()=>{const m=await Promise.all(o.map(async g=>{const p=g({chain:e,retryCount:0,timeout:r}),w=Date.now();let x,_;try{await(s?s({transport:p}):p.request({method:"net_listening"})),_=1}catch{_=0}finally{x=Date.now()}return{latency:x-w,success:_}}));l.push(m),l.length>a&&l.shift();const d=Math.max(...l.map(g=>Math.max(...g.map(({latency:p})=>p)))),h=o.map((g,p)=>{const w=l.map(y=>y[p].latency),_=1-w.reduce((y,T)=>y+T,0)/w.length/d,P=l.map(y=>y[p].success),b=P.reduce((y,T)=>y+T,0)/P.length;return b===0?[0,p]:[u*_+i*b,p]}).sort((g,p)=>p[0]-g[0]);n(h.map(([,g])=>o[g])),await Dn(t),f()};f()}function dd(e){const{key:t="public",name:n="Public Client"}=e;return Le({...e,key:t,name:n,type:"publicClient"}).extend(js)}function cn({mode:e}){return t=>{const n=t.extend(()=>({mode:e}));return{dropTransaction:s=>ku(n,s),dumpState:()=>Fc(n),getAutomine:()=>Bu(n),getTxpoolContent:()=>Mu(n),getTxpoolStatus:()=>Lu(n),impersonateAccount:s=>jc(n,s),increaseTime:s=>Dc(n,s),inspectTxpool:()=>qu(n),loadState:s=>Hc(n,s),mine:s=>Uc(n,s),removeBlockTimestampInterval:()=>Nu(n),reset:s=>Ou(n,s),revert:s=>Fu(n,s),sendUnsignedTransaction:s=>Du(n,s),setAutomine:s=>Uu(n,s),setBalance:s=>Hu(n,s),setBlockGasLimit:s=>Gu(n,s),setBlockTimestampInterval:s=>$u(n,s),setCode:s=>zu(n,s),setCoinbase:s=>Vu(n,s),setIntervalMining:s=>Wu(n,s),setLoggingEnabled:s=>Ku(n,s),setMinGasPrice:s=>Ju(n,s),setNextBlockBaseFeePerGas:s=>Yu(n,s),setNextBlockTimestamp:s=>Qu(n,s),setNonce:s=>Xu(n,s),setRpcUrl:s=>Zu(n,s),setStorageAt:s=>ed(n,s),snapshot:()=>td(n),stopImpersonatingAccount:s=>nd(n,s)}}}function ld(e){const{key:t="test",name:n="Test Client",mode:s}=e;return Le({...e,key:t,name:n,type:"testClient"}).extend(r=>({mode:s,...cn({mode:s})(r)}))}function un(e){return{addChain:t=>Mc(e,t),deployContract:t=>qc(e,t),getAddresses:()=>Su(e),getChainId:()=>ut(e),getPermissions:()=>Cu(e),prepareTransactionRequest:t=>Qt(e,t),requestAddresses:()=>Au(e),requestPermissions:t=>Ru(e,t),sendRawTransaction:t=>Xt(e,t),sendTransaction:t=>bt(e,t),signMessage:t=>Hn(e,t),signTransaction:t=>ju(e,t),signTypedData:t=>sd(e,t),switchChain:t=>ad(e,t),watchAsset:t=>rd(e,t),writeContract:t=>on(e,t)}}function fd(e){const{key:t="wallet",name:n="Wallet Client",transport:s}=e;return Le({...e,key:t,name:n,transport:s,type:"walletClient"}).extend(un)}function hd(e,t={}){const{keepAlive:n,key:s="webSocket",methods:a,name:r="WebSocket JSON-RPC",reconnect:o,retryDelay:c}=t;return({chain:i,retryCount:u,timeout:l})=>{var h;const f=t.retryCount??u,m=l??t.timeout??1e4,d=e||((h=i==null?void 0:i.rpcUrls.default.webSocket)==null?void 0:h[0]);if(!d)throw new Ds;return gt({key:s,methods:a,name:r,async request({method:g,params:p}){const w={method:g,params:p},x=await Ee(d,{keepAlive:n,reconnect:o}),{error:_,result:P}=await x.requestAsync({body:w,timeout:m});if(_)throw new Hs({body:w,error:_,url:d});return P},retryCount:f,retryDelay:c,timeout:m,type:"webSocket"},{getSocket(){return Zc(d)},getRpcClient(){return Ee(d)},async subscribe({params:g,onData:p,onError:w}){const x=await Ee(d),{result:_}=await new Promise((P,b)=>x.request({body:{method:"eth_subscribe",params:g},onError(y){b(y),w==null||w(y)},onResponse(y){if(y.error){b(y.error),w==null||w(y.error);return}if(typeof y.id=="number"){P(y);return}y.method==="eth_subscription"&&p(y.params)}}));return{subscriptionId:_,async unsubscribe(){return new Promise(P=>x.request({body:{method:"eth_unsubscribe",params:[_]},onResponse:P}))}}}})}}class md extends Error{constructor(t,n){super(n),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t,this.details=n}}const Ze="/docs/contract/decodeDeployData";function gd(e){const{abi:t,bytecode:n,data:s}=e;if(s===n)return{bytecode:n};const a=t.find(o=>"type"in o&&o.type==="constructor");if(!a)throw new Us({docsPath:Ze});if(!("inputs"in a))throw new ot({docsPath:Ze});if(!a.inputs||a.inputs.length===0)throw new ot({docsPath:Ze});return{args:Re(a.inputs,`0x${s.replace(n,"")}`),bytecode:n}}function pd({r:e,yParityAndS:t}){const n=re(t),s=n[0]&128?1:0,a=n;return s===1&&(a[0]&=127),{r:e,s:$(a),yParity:s}}function Nt(e){const{r:t,s:n}=pt.Signature.fromCompact(e.slice(2,130));return{r:S(t,{size:32}),yParityAndS:S(n,{size:32})}}function Ot(e){const{r:t,s:n}=pt.Signature.fromCompact(e.slice(2,130)),s=+`0x${e.slice(130)}`,[a,r]=(()=>{if(s===0||s===1)return[void 0,s];if(s===27)return[BigInt(s),0];if(s===28)return[BigInt(s),1];throw new Error("Invalid yParityOrV value")})();return typeof a<"u"?{r:S(t,{size:32}),s:S(n,{size:32}),v:a,yParity:r}:{r:S(t,{size:32}),s:S(n,{size:32}),yParity:r}}async function yd(e){const{serializedTransaction:t,signature:n}=e,s=sn(t),a=n??{r:s.r,s:s.s,v:s.v,yParity:s.yParity},r=nn({...s,r:void 0,s:void 0,v:void 0,yParity:void 0,sidecars:void 0});return await oe({hash:ae(r),signature:a})}function bd(e){const{r:t,s:n,v:s,yParity:a}=e,r=Number(a??s-27n);let o=n;if(r===1){const c=re(n);c[0]|=128,o=$(c)}return{r:t,yParityAndS:o}}function Ft({r:e,yParityAndS:t}){return`0x${new pt.Signature(I(e),I(t)).toCompactHex()}`}function wd(e){const{sidecars:t,version:n}=e,s=e.to??(typeof t[0].blob=="string"?"hex":"bytes"),a=[];for(const{commitment:r}of t)a.push(Gs({commitment:r,to:s,version:n}));return a}function _d(e){const t=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),n=typeof e.blobs[0]=="string"?e.blobs.map(c=>re(c)):e.blobs,s=n.reduce((c,i)=>c+i.length,0),a=at(new Uint8Array(s));let r=!0;for(const c of n){const i=at(c);for(;r&&i.position<c.length;){i.incrementPosition(1);let u=31;c.length-i.position<31&&(u=c.length-i.position);for(const l in Array.from({length:u})){const f=i.readByte();if(f===128&&!i.inspectBytes(i.remaining).includes(128)){r=!1;break}a.pushByte(f)}}}const o=a.bytes.slice(0,a.position);return t==="hex"?$(o):o}function dn({blobToKzgCommitment:e,computeBlobKzgProof:t}){return{blobToKzgCommitment:e,computeBlobKzgProof:t}}function xd(e,t){try{e.loadTrustedSetup(t)}catch(n){const s=n;if(!s.message.includes("trusted setup is already loaded"))throw s}return dn(e)}const Ed=Object.freeze(Object.defineProperty({__proto__:null,AbiConstructorNotFoundError:Us,AbiConstructorParamsNotFoundError:ot,AbiDecodingDataSizeInvalidError:Un,AbiDecodingDataSizeTooSmallError:Gn,AbiDecodingZeroDataError:$n,AbiEncodingArrayLengthMismatchError:zn,AbiEncodingBytesSizeMismatchError:Vn,AbiEncodingLengthMismatchError:ds,AbiErrorInputsNotFoundError:cs,AbiErrorNotFoundError:st,AbiErrorSignatureNotFoundError:Wn,AbiEventNotFoundError:Kn,AbiEventSignatureEmptyTopicsError:Jn,AbiEventSignatureNotFoundError:Yn,AbiFunctionNotFoundError:nt,AbiFunctionOutputsNotFoundError:us,AbiFunctionSignatureNotFoundError:is,AccountStateConflictError:Qn,BaseError:Q,BaseFeeScalarError:Xn,BlockNotFoundError:Zn,BytesSizeMismatchError:hs,CallExecutionError:ea,ChainDisconnectedError:ta,ChainDoesNotSupportContract:sa,ChainMismatchError:Vt,ChainNotFoundError:zt,CircularReferenceError:na,ClientChainNotConfiguredError:aa,ContractFunctionExecutionError:ra,ContractFunctionRevertedError:oa,ContractFunctionZeroDataError:ia,CounterfactualDeploymentFailedError:ca,DecodeLogDataMismatch:ua,DecodeLogTopicsMismatch:da,EIP1193ProviderRpcError:md,Eip1559FeesNotSupportedError:la,EnsAvatarInvalidNftUriError:fa,EnsAvatarUnsupportedNamespaceError:ha,EnsAvatarUriResolutionError:ma,EstimateGasExecutionError:ga,ExecutionRevertedError:Fs,FeeCapTooHighError:Me,FeeCapTooLowError:pa,FeeConflictError:ya,FilterTypeNotSupportedError:ba,HttpRequestError:wa,InsufficientFundsError:_a,IntegerOutOfRangeError:xa,InternalRpcError:Ea,IntrinsicGasTooHighError:va,IntrinsicGasTooLowError:Pa,InvalidAbiDecodingTypeError:Ta,InvalidAbiEncodingTypeError:Ia,InvalidAbiItemError:Sa,InvalidAbiParameterError:ss,InvalidAbiParametersError:ns,InvalidAbiTypeParameterError:Ca,InvalidAddressError:G,InvalidArrayError:Aa,InvalidBytesBooleanError:Ra,InvalidChainIdError:ie,InvalidDecimalNumberError:an,InvalidDefinitionTypeError:ka,InvalidDomainError:Ba,InvalidFunctionModifierError:Ma,InvalidHexBooleanError:La,InvalidHexValueError:ps,InvalidInputRpcError:qa,InvalidLegacyVError:mt,InvalidModifierError:Na,InvalidParameterError:Oa,InvalidParamsRpcError:Fa,InvalidParenthesisError:ja,InvalidPrimaryTypeError:Da,InvalidRequestRpcError:Ha,InvalidSerializableTransactionError:Ua,InvalidSerializedTransactionError:X,InvalidSerializedTransactionTypeError:xs,InvalidSignatureError:Ga,InvalidStorageKeySizeError:vs,InvalidStructSignatureError:$a,InvalidStructTypeError:za,JsonRpcVersionUnsupportedError:Va,LimitExceededRpcError:Wa,MaxFeePerGasTooLowError:Ka,MethodNotFoundRpcError:Ja,MethodNotSupportedRpcError:Ya,NonceMaxValueError:Qa,NonceTooHighError:Xa,NonceTooLowError:Za,ParseRpcError:er,ProviderDisconnectedError:tr,ProviderRpcError:sr,RawContractError:nr,ResourceNotFoundRpcError:ar,ResourceUnavailableRpcError:rr,RpcError:or,RpcRequestError:Hs,SizeExceedsPaddingSizeError:ir,SizeOverflowError:cr,SliceOffsetOutOfBoundsError:ur,SocketClosedError:se,SolidityProtectedKeywordError:dr,StateAssignmentConflictError:lr,SwitchChainError:fr,TimeoutError:rs,TipAboveFeeCapError:Es,TransactionExecutionError:Kt,TransactionNotFoundError:hr,TransactionReceiptNotFoundError:mr,TransactionRejectedRpcError:Ns,TransactionTypeNotSupportedError:gr,UnauthorizedProviderError:pr,UnknownNodeError:Wt,UnknownRpcError:yr,UnknownSignatureError:br,UnknownTypeError:wr,UnsupportedPackedAbiType:ms,UnsupportedProviderMethodError:_r,UrlRequiredError:Ds,UserRejectedRequestError:Os,WaitForTransactionReceiptTimeoutError:xr,WebSocketRequestError:tt,assertCurrentChain:yt,assertRequest:ct,assertTransactionEIP1559:ce,assertTransactionEIP2930:Et,assertTransactionLegacy:vt,blobsToCommitments:Ts,blobsToProofs:Ss,boolToBytes:Er,boolToHex:fs,bytesToBigInt:vr,bytesToBool:Pr,bytesToHex:$,bytesToNumber:Tr,bytesToRlp:Ir,bytesToString:Sr,ccipFetch:Mt,ccipRequest:Mt,checksumAddress:Rs,commitmentToVersionedHash:Gs,commitmentsToVersionedHashes:Is,compactSignatureToHex:Ft,compactSignatureToSignature:pd,concat:gs,concatBytes:Cr,concatHex:H,createClient:Le,createNonceManager:rn,createPublicClient:dd,createTestClient:ld,createTransport:gt,createWalletClient:fd,custom:Ar,decodeAbiParameters:Re,decodeDeployData:gd,decodeErrorResult:Rr,decodeEventLog:kr,decodeFunctionData:eu,decodeFunctionResult:Br,defineBlock:Mr,defineChain:Lr,defineKzg:dn,defineTransaction:qr,defineTransactionReceipt:Nr,defineTransactionRequest:Or,deploylessCallViaBytecodeBytecode:Fr,deploylessCallViaFactoryBytecode:jr,domainSeparator:Dr,encodeAbiParameters:lt,encodeDeployData:Zt,encodeErrorResult:tu,encodeEventTopics:Hr,encodeFunctionData:Ls,encodeFunctionResult:su,encodePacked:nu,erc20Abi:Ur,erc20Abi_bytes32:Gr,erc4626Abi:$r,erc721Abi:zr,ethAddress:Vr,etherUnits:Cs,extractChain:Qc,fallback:id,formatBlock:Wr,formatEther:Kr,formatGwei:Jr,formatLog:Yr,formatTransaction:Qr,formatTransactionReceipt:Xr,formatTransactionRequest:Ae,formatUnits:Zr,fromBlobs:_d,fromBytes:eo,fromHex:to,fromRlp:xt,getAbiItem:dt,getAddress:O,getChainContractAddress:so,getContract:od,getContractAddress:au,getContractError:qs,getCreate2Address:Ks,getCreateAddress:Ws,getEventSelector:Rt,getEventSignature:pe,getFunctionSelector:Te,getFunctionSignature:pe,getSerializedTransactionType:Zs,getTransactionType:Ps,getTypesForEIP712Domain:ks,gweiUnits:As,hashDomain:no,hashMessage:ys,hashStruct:ao,hashTypedData:bs,hexToBigInt:I,hexToBool:ro,hexToBytes:re,hexToCompactSignature:Nt,hexToNumber:R,hexToRlp:oo,hexToSignature:Ot,hexToString:io,http:co,isAddress:U,isAddressEqual:ke,isBytes:it,isErc6492Signature:ws,isHash:Ys,isHex:E,keccak256:ae,labelhash:uo,maxInt104:lo,maxInt112:fo,maxInt120:ho,maxInt128:mo,maxInt136:go,maxInt144:po,maxInt152:yo,maxInt16:bo,maxInt160:wo,maxInt168:_o,maxInt176:xo,maxInt184:Eo,maxInt192:vo,maxInt200:Po,maxInt208:To,maxInt216:Io,maxInt224:So,maxInt232:Co,maxInt24:Ao,maxInt240:Ro,maxInt248:ko,maxInt256:Bo,maxInt32:Mo,maxInt40:Lo,maxInt48:qo,maxInt56:No,maxInt64:Oo,maxInt72:Fo,maxInt8:jo,maxInt80:Do,maxInt88:Ho,maxInt96:Uo,maxUint104:Go,maxUint112:$o,maxUint120:zo,maxUint128:Vo,maxUint136:Wo,maxUint144:Ko,maxUint152:Jo,maxUint16:Yo,maxUint160:Qo,maxUint168:Xo,maxUint176:Zo,maxUint184:ei,maxUint192:ti,maxUint200:si,maxUint208:ni,maxUint216:ai,maxUint224:ri,maxUint232:oi,maxUint24:ii,maxUint240:ci,maxUint248:ui,maxUint256:Be,maxUint32:di,maxUint40:li,maxUint48:fi,maxUint56:hi,maxUint64:mi,maxUint72:gi,maxUint8:pi,maxUint80:yi,maxUint88:bi,maxUint96:wi,minInt104:_i,minInt112:xi,minInt120:Ei,minInt128:vi,minInt136:Pi,minInt144:Ti,minInt152:Ii,minInt16:Si,minInt160:Ci,minInt168:Ai,minInt176:Ri,minInt184:ki,minInt192:Bi,minInt200:Mi,minInt208:Li,minInt216:qi,minInt224:Ni,minInt232:Oi,minInt24:Fi,minInt240:ji,minInt248:Di,minInt256:Hi,minInt32:Ui,minInt40:Gi,minInt48:$i,minInt56:zi,minInt64:Vi,minInt72:Wi,minInt8:Ki,minInt80:Ji,minInt88:Yi,minInt96:Qi,multicall3Abi:Xi,namehash:Zi,nonceManager:Iu,numberToBytes:ec,numberToHex:S,offchainLookup:Ac,offchainLookupAbiItem:Rc,offchainLookupSignature:kc,pad:te,padBytes:tc,padHex:rt,parseAbi:sc,parseAbiItem:nc,parseAbiParameter:Nc,parseAbiParameters:Oc,parseCompactSignature:Nt,parseErc6492Signature:du,parseEther:vu,parseEventLogs:ac,parseGwei:Pu,parseSignature:Ot,parseTransaction:sn,parseUnits:Pt,prepareEncodeFunctionData:rc,presignMessagePrefix:oc,publicActions:js,recoverAddress:oe,recoverMessageAddress:Qs,recoverPublicKey:ic,recoverTransactionAddress:yd,recoverTypedDataAddress:Xs,ripemd160:ou,rpcSchema:cc,rpcTransactionType:uc,serializeAccessList:de,serializeCompactSignature:Ft,serializeErc6492Signature:dc,serializeSignature:kt,serializeTransaction:nn,serializeTypedData:Ms,setErrorConfig:lc,setupKzg:xd,sha256:fc,sidecarsToVersionedHashes:wd,signatureToCompactSignature:bd,signatureToHex:kt,size:ft,slice:ne,sliceBytes:hc,sliceHex:_s,stringToBytes:mc,stringToHex:ls,stringify:gc,testActions:cn,toBlobSidecars:ht,toBlobs:pc,toBytes:j,toEventHash:Bt,toEventSelector:Rt,toEventSignature:pe,toFunctionHash:Bt,toFunctionSelector:Te,toFunctionSignature:pe,toHex:v,toPrefixedMessage:yc,toRlp:D,transactionType:bc,trim:K,universalSignatureValidatorAbi:wc,universalSignatureValidatorByteCode:_c,validateTypedData:Bs,verifyHash:iu,verifyMessage:cu,verifyTypedData:uu,walletActions:un,webSocket:hd,weiUnits:xc,withRetry:Ec,withTimeout:as,zeroAddress:vc,zeroHash:Pc},Symbol.toStringTag,{value:"Module"}));var Tt={},Oe={},ln={},Ie={},fn={},fe={},he={};Object.defineProperty(he,"__esModule",{value:!0});he.getSDKVersion=void 0;const vd=()=>"9.1.0";he.getSDKVersion=vd;var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.generateRequestId=void 0;const Pd=e=>e.toString(16).padStart(2,"0"),Td=e=>{const t=new Uint8Array(e/2);return window.crypto.getRandomValues(t),Array.from(t,Pd).join("")},Id=()=>typeof window<"u"?Td(10):new Date().getTime().toString(36);Fe.generateRequestId=Id;Object.defineProperty(fe,"__esModule",{value:!0});fe.MessageFormatter=void 0;const Sd=he,Cd=Fe;class je{}fe.MessageFormatter=je;je.makeRequest=(e,t)=>({id:(0,Cd.generateRequestId)(),method:e,params:t,env:{sdkVersion:(0,Sd.getSDKVersion)()}});je.makeResponse=(e,t,n)=>({id:e,success:!0,version:n,data:t});je.makeErrorResponse=(e,t,n)=>({id:e,success:!1,error:t,version:n});var q={};Object.defineProperty(q,"__esModule",{value:!0});q.RestrictedMethods=q.Methods=void 0;var jt;(function(e){e.sendTransactions="sendTransactions",e.rpcCall="rpcCall",e.getChainInfo="getChainInfo",e.getSafeInfo="getSafeInfo",e.getTxBySafeTxHash="getTxBySafeTxHash",e.getSafeBalances="getSafeBalances",e.signMessage="signMessage",e.signTypedMessage="signTypedMessage",e.getEnvironmentInfo="getEnvironmentInfo",e.getOffChainSignature="getOffChainSignature",e.requestAddressBook="requestAddressBook",e.wallet_getPermissions="wallet_getPermissions",e.wallet_requestPermissions="wallet_requestPermissions"})(jt||(q.Methods=jt={}));var Dt;(function(e){e.requestAddressBook="requestAddressBook"})(Dt||(q.RestrictedMethods=Dt={}));(function(e){var t=C&&C.__createBinding||(Object.create?function(r,o,c,i){i===void 0&&(i=c);var u=Object.getOwnPropertyDescriptor(o,c);(!u||("get"in u?!o.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return o[c]}}),Object.defineProperty(r,i,u)}:function(r,o,c,i){i===void 0&&(i=c),r[i]=o[c]}),n=C&&C.__exportStar||function(r,o){for(var c in r)c!=="default"&&!Object.prototype.hasOwnProperty.call(o,c)&&t(o,r,c)};Object.defineProperty(e,"__esModule",{value:!0});const s=fe;class a{constructor(o=null,c=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer=typeof window>"u",this.isValidMessage=({origin:i,data:u,source:l})=>{const f=!u,m=!this.isServer&&l===window.parent,d=typeof u.version<"u"&&parseInt(u.version.split(".")[0]),h=typeof d=="number"&&d>=1;let g=!0;return Array.isArray(this.allowedOrigins)&&(g=this.allowedOrigins.find(p=>p.test(i))!==void 0),!f&&m&&h&&g},this.logIncomingMessage=i=>{console.info(`Safe Apps SDK v1: A message was received from origin ${i.origin}. `,i.data)},this.onParentMessage=i=>{this.isValidMessage(i)&&(this.debugMode&&this.logIncomingMessage(i),this.handleIncomingMessage(i.data))},this.handleIncomingMessage=i=>{const{id:u}=i,l=this.callbacks.get(u);l&&(l(i),this.callbacks.delete(u))},this.send=(i,u)=>{const l=s.MessageFormatter.makeRequest(i,u);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(l,"*"),new Promise((f,m)=>{this.callbacks.set(l.id,d=>{if(!d.success){m(new Error(d.error));return}f(d)})})},this.allowedOrigins=o,this.debugMode=c,this.isServer||window.addEventListener("message",this.onParentMessage)}}e.default=a,n(q,e)})(fn);var De={},He={},Ue={};Object.defineProperty(Ue,"__esModule",{value:!0});Ue.isObjectEIP712TypedData=void 0;const Ad=e=>typeof e=="object"&&e!=null&&"domain"in e&&"types"in e&&"message"in e;Ue.isObjectEIP712TypedData=Ad;var hn={};Object.defineProperty(hn,"__esModule",{value:!0});var mn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TransferDirection=e.TransactionStatus=e.TokenType=e.Operation=void 0;var t=Cc;Object.defineProperty(e,"Operation",{enumerable:!0,get:function(){return t.Operation}}),Object.defineProperty(e,"TokenType",{enumerable:!0,get:function(){return t.TokenType}}),Object.defineProperty(e,"TransactionStatus",{enumerable:!0,get:function(){return t.TransactionStatus}}),Object.defineProperty(e,"TransferDirection",{enumerable:!0,get:function(){return t.TransferDirection}})})(mn);var gn={};Object.defineProperty(gn,"__esModule",{value:!0});(function(e){var t=C&&C.__createBinding||(Object.create?function(s,a,r,o){o===void 0&&(o=r);var c=Object.getOwnPropertyDescriptor(a,r);(!c||("get"in c?!a.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return a[r]}}),Object.defineProperty(s,o,c)}:function(s,a,r,o){o===void 0&&(o=r),s[o]=a[r]}),n=C&&C.__exportStar||function(s,a){for(var r in s)r!=="default"&&!Object.prototype.hasOwnProperty.call(a,r)&&t(a,s,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Ue,e),n(hn,e),n(mn,e),n(gn,e)})(He);Object.defineProperty(De,"__esModule",{value:!0});De.TXs=void 0;const we=q,Rd=He;class kd{constructor(t){this.communicator=t}async getBySafeTxHash(t){if(!t)throw new Error("Invalid safeTxHash");return(await this.communicator.send(we.Methods.getTxBySafeTxHash,{safeTxHash:t})).data}async signMessage(t){const n={message:t};return(await this.communicator.send(we.Methods.signMessage,n)).data}async signTypedMessage(t){if(!(0,Rd.isObjectEIP712TypedData)(t))throw new Error("Invalid typed data");return(await this.communicator.send(we.Methods.signTypedMessage,{typedData:t})).data}async send({txs:t,params:n}){if(!t||!t.length)throw new Error("No transactions were passed");const s={txs:t,params:n};return(await this.communicator.send(we.Methods.sendTransactions,s)).data}}De.TXs=kd;var Ge={},Z={};Object.defineProperty(Z,"__esModule",{value:!0});Z.RPC_CALLS=void 0;Z.RPC_CALLS={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"};Object.defineProperty(Ge,"__esModule",{value:!0});Ge.Eth=void 0;const B=Z,Bd=q,N={defaultBlockParam:(e="latest")=>e,returnFullTxObjectParam:(e=!1)=>e,blockNumberToHex:e=>Number.isInteger(e)?`0x${e.toString(16)}`:e};class Md{constructor(t){this.communicator=t,this.call=this.buildRequest({call:B.RPC_CALLS.eth_call,formatters:[null,N.defaultBlockParam]}),this.getBalance=this.buildRequest({call:B.RPC_CALLS.eth_getBalance,formatters:[null,N.defaultBlockParam]}),this.getCode=this.buildRequest({call:B.RPC_CALLS.eth_getCode,formatters:[null,N.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:B.RPC_CALLS.eth_getStorageAt,formatters:[null,N.blockNumberToHex,N.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:B.RPC_CALLS.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:B.RPC_CALLS.eth_getBlockByHash,formatters:[null,N.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:B.RPC_CALLS.eth_getBlockByNumber,formatters:[N.blockNumberToHex,N.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:B.RPC_CALLS.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:B.RPC_CALLS.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:B.RPC_CALLS.eth_getTransactionCount,formatters:[null,N.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:B.RPC_CALLS.eth_gasPrice}),this.getEstimateGas=n=>this.buildRequest({call:B.RPC_CALLS.eth_estimateGas})([n]),this.setSafeSettings=this.buildRequest({call:B.RPC_CALLS.safe_setSettings})}buildRequest(t){const{call:n,formatters:s}=t;return async a=>{s&&Array.isArray(a)&&s.forEach((c,i)=>{c&&(a[i]=c(a[i]))});const r={call:n,params:a||[]};return(await this.communicator.send(Bd.Methods.rpcCall,r)).data}}}Ge.Eth=Md;var $e={};const Ld=Tc(Ed);var J={};Object.defineProperty(J,"__esModule",{value:!0});J.MAGIC_VALUE_BYTES=J.MAGIC_VALUE=void 0;const qd="0x1626ba7e";J.MAGIC_VALUE=qd;const Nd="0x20c13b0b";J.MAGIC_VALUE_BYTES=Nd;var It={},me={},z={};Object.defineProperty(z,"__esModule",{value:!0});z.PermissionsError=z.PERMISSIONS_REQUEST_REJECTED=void 0;z.PERMISSIONS_REQUEST_REJECTED=4001;class St extends Error{constructor(t,n,s){super(t),this.code=n,this.data=s,Object.setPrototypeOf(this,St.prototype)}}z.PermissionsError=St;Object.defineProperty(me,"__esModule",{value:!0});me.Wallet=void 0;const et=q,_e=z;class Od{constructor(t){this.communicator=t}async getPermissions(){return(await this.communicator.send(et.Methods.wallet_getPermissions,void 0)).data}async requestPermissions(t){if(!this.isPermissionRequestValid(t))throw new _e.PermissionsError("Permissions request is invalid",_e.PERMISSIONS_REQUEST_REJECTED);try{return(await this.communicator.send(et.Methods.wallet_requestPermissions,t)).data}catch{throw new _e.PermissionsError("Permissions rejected",_e.PERMISSIONS_REQUEST_REJECTED)}}isPermissionRequestValid(t){return t.every(n=>typeof n=="object"?Object.keys(n).every(s=>!!Object.values(et.RestrictedMethods).includes(s)):!1)}}me.Wallet=Od;Object.defineProperty(It,"__esModule",{value:!0});const Fd=me,Ht=z,Ut=(e,t)=>t.some(n=>n.parentCapability===e),jd=()=>(e,t,n)=>{const s=n.value;return n.value=async function(){const a=new Fd.Wallet(this.communicator);let r=await a.getPermissions();if(Ut(t,r)||(r=await a.requestPermissions([{[t]:{}}])),!Ut(t,r))throw new Ht.PermissionsError("Permissions rejected",Ht.PERMISSIONS_REQUEST_REJECTED);return s.apply(this)},n};It.default=jd;var Dd=C&&C.__decorate||function(e,t,n,s){var a=arguments.length,r=a<3?t:s===null?s=Object.getOwnPropertyDescriptor(t,n):s,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(e,t,n,s);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},Hd=C&&C.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($e,"__esModule",{value:!0});$e.Safe=void 0;const xe=Ld,Gt=J,F=q,$t=Z,Ud=He,Gd=Hd(It);class pn{constructor(t){this.communicator=t}async getChainInfo(){return(await this.communicator.send(F.Methods.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(F.Methods.getSafeInfo,void 0)).data}async experimental_getBalances({currency:t="usd"}={}){return(await this.communicator.send(F.Methods.getSafeBalances,{currency:t})).data}async check1271Signature(t,n="0x"){const s=await this.getInfo(),a=(0,xe.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,n]}),r={call:$t.RPC_CALLS.eth_call,params:[{to:s.safeAddress,data:a},"latest"]};try{return(await this.communicator.send(F.Methods.rpcCall,r)).data.slice(0,10).toLowerCase()===Gt.MAGIC_VALUE}catch{return!1}}async check1271SignatureBytes(t,n="0x"){const s=await this.getInfo(),a=(0,xe.encodeFunctionData)({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,n]}),r={call:$t.RPC_CALLS.eth_call,params:[{to:s.safeAddress,data:a},"latest"]};try{return(await this.communicator.send(F.Methods.rpcCall,r)).data.slice(0,10).toLowerCase()===Gt.MAGIC_VALUE_BYTES}catch{return!1}}calculateMessageHash(t){return(0,xe.hashMessage)(t)}calculateTypedMessageHash(t){const n=typeof t.domain.chainId=="object"?t.domain.chainId.toNumber():Number(t.domain.chainId);let s=t.primaryType;if(!s){const a=Object.values(t.types),r=Object.keys(t.types).filter(o=>a.every(c=>c.every(({type:i})=>i.replace("[","").replace("]","")!==o)));if(r.length===0||r.length>1)throw new Error("Please specify primaryType");s=r[0]}return(0,xe.hashTypedData)({message:t.message,domain:{...t.domain,chainId:n,verifyingContract:t.domain.verifyingContract,salt:t.domain.salt},types:t.types,primaryType:s})}async getOffChainSignature(t){return(await this.communicator.send(F.Methods.getOffChainSignature,t)).data}async isMessageSigned(t,n="0x"){let s;if(typeof t=="string"&&(s=async()=>{const a=this.calculateMessageHash(t);return await this.isMessageHashSigned(a,n)}),(0,Ud.isObjectEIP712TypedData)(t)&&(s=async()=>{const a=this.calculateTypedMessageHash(t);return await this.isMessageHashSigned(a,n)}),s)return await s();throw new Error("Invalid message type")}async isMessageHashSigned(t,n="0x"){const s=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const a of s)if(await a(t,n))return!0;return!1}async getEnvironmentInfo(){return(await this.communicator.send(F.Methods.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(F.Methods.requestAddressBook,void 0)).data}}$e.Safe=pn;Dd([(0,Gd.default)()],pn.prototype,"requestAddressBook",null);var $d=C&&C.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ie,"__esModule",{value:!0});const zd=$d(fn),Vd=De,Wd=Ge,Kd=$e,Jd=me;class Yd{constructor(t={}){const{allowedDomains:n=null,debug:s=!1}=t;this.communicator=new zd.default(n,s),this.eth=new Wd.Eth(this.communicator),this.txs=new Vd.TXs(this.communicator),this.safe=new Kd.Safe(this.communicator),this.wallet=new Jd.Wallet(this.communicator)}}Ie.default=Yd;(function(e){var t=C&&C.__createBinding||(Object.create?function(o,c,i,u){u===void 0&&(u=i);var l=Object.getOwnPropertyDescriptor(c,i);(!l||("get"in l?!c.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return c[i]}}),Object.defineProperty(o,u,l)}:function(o,c,i,u){u===void 0&&(u=i),o[u]=c[i]}),n=C&&C.__exportStar||function(o,c){for(var i in o)i!=="default"&&!Object.prototype.hasOwnProperty.call(c,i)&&t(c,o,i)},s=C&&C.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.getSDKVersion=void 0;const a=s(Ie);e.default=a.default,n(Ie,e),n(He,e),n(q,e),n(fe,e);var r=he;Object.defineProperty(e,"getSDKVersion",{enumerable:!0,get:function(){return r.getSDKVersion}}),n(Z,e)})(ln);var Y={};Object.defineProperty(Y,"__esModule",{value:!0});Y.numberToHex=Y.getLowerCase=void 0;function Qd(e){return e&&e.toLowerCase()}Y.getLowerCase=Qd;function Xd(e){return`0x${e.toString(16)}`}Y.numberToHex=Xd;Object.defineProperty(Oe,"__esModule",{value:!0});Oe.SafeAppProvider=void 0;const W=ln,Zd=Ic,M=Y;class el extends Zd.EventEmitter{constructor(t,n){super(),this.submittedTxs=new Map,this.safe=t,this.sdk=n}async connect(){this.emit("connect",{chainId:this.chainId})}async disconnect(){}get chainId(){return this.safe.chainId}async request(t){var a,r,o,c;const{method:n,params:s=[]}=t;switch(n){case"eth_accounts":return[this.safe.safeAddress];case"net_version":case"eth_chainId":return(0,M.numberToHex)(this.chainId);case"personal_sign":{const[m,d]=s;if(this.safe.safeAddress.toLowerCase()!==d.toLowerCase())throw new Error("The address or message hash is invalid");const h=await this.sdk.txs.signMessage(m);return("signature"in h?h.signature:void 0)||"0x"}case"eth_sign":{const[m,d]=s;if(this.safe.safeAddress.toLowerCase()!==m.toLowerCase()||!d.startsWith("0x"))throw new Error("The address or message hash is invalid");const h=await this.sdk.txs.signMessage(d);return("signature"in h?h.signature:void 0)||"0x"}case"eth_signTypedData":case"eth_signTypedData_v4":{const[m,d]=s,h=typeof d=="string"?JSON.parse(d):d;if(this.safe.safeAddress.toLowerCase()!==m.toLowerCase())throw new Error("The address is invalid");const g=await this.sdk.txs.signTypedMessage(h);return("signature"in g?g.signature:void 0)||"0x"}case"eth_sendTransaction":const i={...s[0],value:s[0].value||"0",data:s[0].data||"0x"};typeof i.gas=="string"&&i.gas.startsWith("0x")&&(i.gas=parseInt(i.gas,16));const u=await this.sdk.txs.send({txs:[i],params:{safeTxGas:i.gas}});return this.submittedTxs.set(u.safeTxHash,{from:this.safe.safeAddress,hash:u.safeTxHash,gas:0,gasPrice:"0x00",nonce:0,input:i.data,value:i.value,to:i.to,blockHash:null,blockNumber:null,transactionIndex:null}),u.safeTxHash;case"eth_blockNumber":return(await this.sdk.eth.getBlockByNumber(["latest"])).number;case"eth_getBalance":return this.sdk.eth.getBalance([(0,M.getLowerCase)(s[0]),s[1]]);case"eth_getCode":return this.sdk.eth.getCode([(0,M.getLowerCase)(s[0]),s[1]]);case"eth_getTransactionCount":return this.sdk.eth.getTransactionCount([(0,M.getLowerCase)(s[0]),s[1]]);case"eth_getStorageAt":return this.sdk.eth.getStorageAt([(0,M.getLowerCase)(s[0]),s[1],s[2]]);case"eth_getBlockByNumber":return this.sdk.eth.getBlockByNumber([s[0],s[1]]);case"eth_getBlockByHash":return this.sdk.eth.getBlockByHash([s[0],s[1]]);case"eth_getTransactionByHash":let f=s[0];try{f=(await this.sdk.txs.getBySafeTxHash(f)).txHash||f}catch{}return this.submittedTxs.has(f)?this.submittedTxs.get(f):this.sdk.eth.getTransactionByHash([f]).then(m=>(m&&(m.hash=s[0]),m));case"eth_getTransactionReceipt":{let m=s[0];try{m=(await this.sdk.txs.getBySafeTxHash(m)).txHash||m}catch{}return this.sdk.eth.getTransactionReceipt([m]).then(d=>(d&&(d.transactionHash=s[0]),d))}case"eth_estimateGas":return this.sdk.eth.getEstimateGas(s[0]);case"eth_call":return this.sdk.eth.call([s[0],s[1]]);case"eth_getLogs":return this.sdk.eth.getPastLogs([s[0]]);case"eth_gasPrice":return this.sdk.eth.getGasPrice();case"wallet_getPermissions":return this.sdk.wallet.getPermissions();case"wallet_requestPermissions":return this.sdk.wallet.requestPermissions(s[0]);case"safe_setSettings":return this.sdk.eth.setSafeSettings([s[0]]);case"wallet_sendCalls":{if(s[0].from!==this.safe.safeAddress)throw Error("Invalid from address");const m=s[0].calls.map((h,g)=>{if(h.chainId!==(0,M.numberToHex)(this.chainId))throw new Error(`Invalid call #${g}: Safe is not on chain ${h.chainId}`);if(!h.to)throw new Error(`Invalid call #${g}: missing "to" field`);return{to:h.to,data:h.data??"0x",value:h.value??(0,M.numberToHex)(0)}}),{safeTxHash:d}=await this.sdk.txs.send({txs:m});return d}case"wallet_getCallsStatus":{const m={[W.TransactionStatus.AWAITING_CONFIRMATIONS]:"PENDING",[W.TransactionStatus.AWAITING_EXECUTION]:"PENDING",[W.TransactionStatus.CANCELLED]:"CONFIRMED",[W.TransactionStatus.FAILED]:"CONFIRMED",[W.TransactionStatus.SUCCESS]:"CONFIRMED"},d=await this.sdk.txs.getBySafeTxHash(s[0]),h=m[d.txStatus];if(!d.txHash)return{status:h};const g=await this.sdk.eth.getTransactionReceipt([d.txHash]);if(!g)return{status:h};const p=((r=(a=d.txData)==null?void 0:a.dataDecoded)==null?void 0:r.method)!=="multiSend"?1:((c=(o=d.txData.dataDecoded.parameters)==null?void 0:o[0].valueDecoded)==null?void 0:c.length)??1,w=Number(g.blockNumber),x=Number(g.gasUsed),_=Array(p).fill({logs:g.logs,status:(0,M.numberToHex)(d.txStatus===W.TransactionStatus.SUCCESS?1:0),chainId:(0,M.numberToHex)(this.chainId),blockHash:g.blockHash,blockNumber:(0,M.numberToHex)(w),gasUsed:(0,M.numberToHex)(x),transactionHash:d.txHash});return{status:h,receipts:_}}case"wallet_showCallsStatus":throw new Error(`"${t.method}" not supported`);case"wallet_getCapabilities":return{[(0,M.numberToHex)(this.chainId)]:{atomicBatch:{supported:!0}}};default:throw Error(`"${t.method}" not implemented`)}}send(t,n){t||n("Undefined request"),this.request(t).then(s=>n(null,{jsonrpc:"2.0",id:t.id,result:s})).catch(s=>n(s,null))}}Oe.SafeAppProvider=el;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SafeAppProvider=void 0;var t=Oe;Object.defineProperty(e,"SafeAppProvider",{enumerable:!0,get:function(){return t.SafeAppProvider}})})(Tt);const tl=Sc(Tt),rl=Bc({__proto__:null,default:tl},[Tt]);export{rl as i};
